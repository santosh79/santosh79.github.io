<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="alternate" type="application/atom+xml" title="Use the :store option with Redis - feed" href="/index.xml" />

    <script type="text/javascript">
      if((navigator.userAgent.match(/iPad/i))) {
        document.write("<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\" />");
      } else if((navigator.userAgent.match(/iPhone/i))) {
        document.write("<meta name=\"viewport\" content=\"width=device-width; initial-scale=0.5; maximum-scale=1.0; user-scalable=1;\" />");
      }
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
    <title>Use the :store option with Redis</title>
  </head>
  <body>
    <header id="main_header">
      <span>
        <a href="/">blog</a>
      </span>
      <span>
        <a href="http://santosh79.tumblr.com" target="_blank">tumblog</a>
      </span>
      <span>
        <a href="http://github.com/santosh79/" target="_blank">github</a>
      </span>
      <span>
        <a href="http://twitter.com/santosh79" target="_blank">@santosh79</a>
      </span>
      <span>
        <a href="/images/resume.html">resume</a>
      </span>
    </header>
    <section>
      <article class="post">
  <header>
    <div class="date_article_page">May 29th 2011</div>
    <h1>Use the :store option with Redis</h1>
  </header>

  <section class="content">
    <p>Here&rsquo;s a quick redis tip. Let&rsquo;s say you have a huge collection of items in a set, and for some reason you find yourself needing to page through them. What do you do? One thing you absolutely do NOT want to do is load up your entire massive set of items from redis into memory and then storing it into a datastructure provide by your laguage.</p>

<p>Another option is to somehow copy the items from the redis set into a redis list. With a redis list you get pagination options (the <strong>lrange</strong> command). For doing accomplishing this, again you do not want to load your redis set into memory and then dump it back into redis as a list. Instead, you want to use redis' sort command with the <strong>:store</strong> option that stores it as a list.</p>

<p>Example:
    redis.sort &ldquo;set_to_paginate_over&rdquo;, :store => &ldquo;list_you_will_be_paginating_over&rdquo;</p>

<p>The <strong>sort</strong> command also allows passing an <strong>:expire</strong> option in seconds, if you don&rsquo;t think you&rsquo;ll be needing the list for a long time.</p>

<h3>Performance</h3>

<p>Based on some simple tests I ran, I am seeing a 100x performance gain by using the <strong>:store</strong> option. Here&rsquo;s the <a href="http://gist.github.com/998432">code</a> that I used for benchmarking.</p>

  </section>

  <section class="comments">

    <div id="disqus_thread"></div>
    <script type='text/javascript' src='http://santosh-log.disqus.com/embed.js'></script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


  </section>
</article>

 
    </section>
  
  
  
  
  
  
  </body>
</html>

